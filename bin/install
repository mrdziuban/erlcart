#!/bin/bash -e

DIR="$OPENSHIFT_ERL_DIR/usr"
export PATH="$OPENSHIFT_ERL_DIR/usr/bin/:$PATH"

cd "$DIR"
unzip erlang.zip

cd erlang
yes "n" | ./Install "$DIR"/erlang
cd ..

export MIX_ARCHIVES="$OPENSHIFT_ERL_DIR/mix"

cp --symbolic-link "$DIR"/erlang/bin/* "$DIR"/bin/
cp --symbolic-link "$DIR"/elixir/bin/* "$DIR"/bin/

cd ..
mkdir mix
cd mix
mix local.hex --force

exit 0
